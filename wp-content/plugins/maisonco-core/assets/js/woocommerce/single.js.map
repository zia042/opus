{"version":3,"sources":["before.js","single.js","after.js"],"names":["$","OpalWoocommerceSingleProduct","_classCallCheck","this","initSlideProduct","_createClass","key","value","removeClass","index","className","match","join","flexslider","selector","animation","controlNav","directionNav","slideshow","smoothHeight","itemMargin","touch","priceAt","$fbtProducts","find","$button","totalPrice","parseFloat","data","on","id","val","closest","toggleClass","currentPrice","hasClass","addClass","$product_ids","$singleBtn","currentURL","window","location","href","ajax","dataType","action","product_ids","attr","error","success","response","wc_add_to_cart_params","url","document","body","number","x","split","x1","x2","length","decimal","rgx","test","replace","thousand","n","currency_pos","currency","jQuery"],"mappings":"8XAAA,SAAAA,GC8HA,ID9HA,WCCA,QAAAC,KAAAC,gBAAAC,KAAAF,GAEAE,KAAAC,mBDHA,MAAAC,cAAAJ,IAAAK,IAAA,mBAAAC,MAAA,WAAAP,EAAA,kECCAQ,YAAA,SAAAC,EAAAC,GAAA,OAAAA,EAAAC,MAAA,wDAAAC,KAAA,OASAC,YARAC,SAAA,4EACAC,UAAA,QACAC,YAAA,EAUAC,cAAA,EDdAC,WAAA,EAAAC,cAAA,EAAAC,WAAA,ECOAC,OAAA,ODPAf,IAAA,mBAAAC,MAAA,WCcAU,GAAAA,GAAAA,EAAAA,0BAEAE,MAAAA,EAAAA,QAAAA,GAAAA,CANA,GAAAG,GAAAC,EAAAC,KAAA,8CAUAC,EAAAF,EAAAC,KAAA,2BAYAE,EAAAC,WAAAJ,EAAAC,KAAA,mBAAAI,KAAA,SAVAL,GAAAK,KAAA,YAYAL,EAAAK,KAAA,YDlCAL,EAAAK,KAAA,WAAAL,EAAAK,KAAA,kBAAAL,EAAAK,KAAA,eCyBAL,GAAAC,KAAA,wBAAAK,GAAA,SAAA,WAeA,GAAAC,GAAA9B,EAAAG,MAAA4B,KAbA/B,GAAAG,MAAA6B,QAAA,MAAAC,YAAA,UACA,IAAAC,GAAAP,WAAA3B,EAAAG,MAAA6B,QAAA,MAAAR,KAAA,kBAAAI,KAAA,SACA5B,GAAAG,MAAA6B,QAAA,MAAAG,SAAA,YACAZ,EAAAC,KAAA,gBAAAM,GAAAM,SAAA,aAAAV,GAAAQ,IAAAX,EAAAC,KAAA,gBAAAM,GAAAtB,YAAA,aAAAkB,GAAAQ,EAsBA,IAAAG,GAAA,GAbAd,GAAAA,KAAAA,oBAAAA,KAAAA,WACAvB,EAAAG,MAAAgC,SAAA,aACAnC,GAAAA,IAAAA,EAAAA,MAAAA,KAAAA,wBAAAA,SAIA0B,EAAAA,KAAAA,QAAAA,GAGAH,EAAAA,KAAAA,KAAAA,aAAAA,MAIAA,EAAAM,GAAA,QAAA,2CAAA,WACAN,GAAAA,GAAAA,EAAAA,KACAe,GAAAF,SAAA,UAEA,IAAAG,GAAAC,OAAAC,SAAAC,IAeA1C,GAAA2C,MAZAlB,IAAAA,QAcAmB,SAAA,OAZAtB,OAAAA,OACAM,MAcAiB,OAAA,kCAZAC,YAAAR,EAAAS,KAAA,UAEAC,MAAA,WACAV,OAAAA,SAAAA,GAEAW,QAAA,SAAAC,GAcA,GAAA,mBAAAC,wBAZAnD,QAAAA,sBAAAA,wBAEA4C,YADAQ,OAAAA,SAAAA,sBAAAA,SAKAN,GAAAA,SAAAA,MAAAA,QAAAA,kBAFA9C,EAAAqD,SAAAC,MAAAzB,GAAA,yBAAA,WAIAmB,EAAAA,YAAAA,sBD/EA1C,IAAA,eAAAC,MAAA,SCsGAgD,GAZAvD,GAAAA,GAAAA,CACAA,IAAAA,SAAAA,gBAAAA,EAAAA,CACAsC,EAAAA,EAAAA,QAAAA,gBAAAA,EAQA,KAPA,GAAAkB,GAAAD,EAAAE,MAAA,KAEAC,EAAAF,EAAA,GAxBAG,EAAAH,EAAAI,OAAA,EAAAC,QAAAL,EAAA,GAAA,GA2BAM,EAAA,eAEAA,EAAAC,KAAAL,IDpGAA,EAAAA,EAAAM,QAAAF,EAAA,KAAAG,SAAA,KCuGAC,GAAAR,EAAAC,EAIA,OAAAQ,cAAA,IAAA,OAEA,MAAAC,UAAAF,CAEAR,KAAAA,QACA,MAAAQ,GAAAE,QAEAF,KAAAA,aACA,MAAAE,UAAA,IAAAF,CAGA,KAAA,cACA,MAAAA,GAAA,IAAAE,cDvHAnE,OEAAoE","file":"single.js","sourcesContent":["(function ($) {"," class OpalWoocommerceSingleProduct {\n    constructor() {\n        //this.productTogerther();\n        this.initSlideProduct();\n    }\n\n     initSlideProduct() {\n        let SingleSlider = $('.single-product.woocommerce-single-style-4 div.product .images');\n         SingleSlider.removeClass (function (index, className) {\n            return (className.match (/(^|\\s)woocommerce-product-gallery--columns-\\S+/g) || []).join(' ');\n        }).flexslider({\n            selector: '.woocommerce-product-gallery__wrapper .woocommerce-product-gallery__image',\n            animation: 'slide',\n            controlNav: true,\n            directionNav: true,\n            slideshow: false,\n            smoothHeight: false,\n            itemMargin: 0,\n            touch: true,\n        });\n     }\n\n    //product Together Select\n    productTogerther(){\n\n        var $fbtProducts = $('.opal-frequently-bought');\n\n        if ( $fbtProducts.length <= 0 ) {\n            return;\n        }\n        var priceAt = $fbtProducts.find('.otf-total-price .woocommerce-Price-amount'),\n            $button = $fbtProducts.find('.otf_add_to_cart_button'),\n            totalPrice = parseFloat($fbtProducts.find('#otf-data_price').data('price')),\n            currency = $fbtProducts.data('currency'),\n            thousand = $fbtProducts.data('thousand'),\n            decimal = $fbtProducts.data('decimal'),\n            price_decimals = $fbtProducts.data('price_decimals'),\n            currency_pos = $fbtProducts.data('currency_pos');\n\n        $fbtProducts.find('input[type=checkbox]').on('change', function () {\n            let id = $(this).val();\n            $(this).closest('li').toggleClass('uncheck');\n            let currentPrice = parseFloat($(this).closest('li').find('.product-price').data('price'));\n            if ($(this).closest('li').hasClass('uncheck')) {\n                $fbtProducts.find('#fbt-product-' + id).addClass('un-active');\n                totalPrice -= currentPrice;\n\n            } else {\n                $fbtProducts.find('#fbt-product-' + id).removeClass('un-active');\n                totalPrice += currentPrice;\n            }\n\n            let $product_ids = '0';\n            $fbtProducts.find('.product-list li').each(function () {\n                if (!$(this).hasClass('uncheck')) {\n                    $product_ids += ',' + $(this).find('input[type=checkbox]').val();\n                }\n            });\n\n            $button.attr('value', $product_ids);\n\n            priceAt.html( this.formatNumber( totalPrice) );\n        });\n\n        // Add to cart ajax\n        $fbtProducts.on('click', '.otf_add_to_cart_button.ajax_add_to_cart', function() {\n            var $singleBtn = $(this);\n            $singleBtn.addClass('loading');\n\n            var currentURL = window.location.href;\n\n            $.ajax({\n                url     : ajaxurl,\n                dataType: 'json',\n                method  : 'post',\n                data    : {\n                    action     : 'otf_woocommerce_fbt_add_to_cart',\n                    product_ids: $singleBtn.attr('value')\n                },\n                error   : function() {\n                    window.location = currentURL;\n                },\n                success : function(response) {\n                    if ( typeof wc_add_to_cart_params !== 'undefined' ) {\n                        if ( wc_add_to_cart_params.cart_redirect_after_add === 'yes' ) {\n                            window.location = wc_add_to_cart_params.cart_url;\n                            return;\n                        }\n                    }\n\n                    $(document.body).trigger('updated_wc_div');\n                    $(document.body).on('wc_fragments_refreshed', function() {\n                        $singleBtn.removeClass('loading');\n                    });\n\n                }\n            });\n\n        });\n\n    }\n\n     formatNumber(number) {\n         let n = number;\n         if (parseInt(price_decimals) > 0) {\n             number = number.toFixed(price_decimals) + '';\n             var x = number.split('.');\n             var x1 = x[0],\n                 x2 = x.length > 1 ? decimal + x[1] : '';\n             var rgx = /(\\d+)(\\d{3})/;\n             while (rgx.test(x1)) {\n                 x1 = x1.replace(rgx, '$1' + thousand + '$2');\n             }\n\n             n = x1 + x2\n         }\n\n\n         switch (currency_pos) {\n             case 'left' :\n                 return currency + n;\n                 break;\n             case 'right' :\n                 return n + currency;\n                 break;\n             case 'left_space' :\n                 return currency + ' ' + n;\n                 break;\n             case 'right_space' :\n                 return n + ' ' + currency;\n                 break;\n         }\n     }\n\n}\n\nnew OpalWoocommerceSingleProduct();","})(jQuery);"]}